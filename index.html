<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Game</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
</head>
<body>
    <h1>Typing Game</h1>
    <button onclick="runGame()">ゲームを開始</button>
    <div id="output"></div>

    <script>
        async function loadPyodideAndRun() {
            let pyodide = await loadPyodide();
            await pyodide.loadPackage(["micropip"]);
            await pyodide.runPythonAsync(`
                import micropip
                await micropip.install("pyxel")
                await micropip.install("typehandler")  # ✅ ここで `typehandler` をインストール

                import pyxel
                from typehandler import Process

                pyxel.init(160, 120)
                pyxel.cls(0)
                pyxel.text(10, 10, "Typing Game", pyxel.COLOR_WHITE)
                pyxel.flip()
            `);
        }

        function runGame() {
            loadPyodideAndRun();
        }
    </script>
</body>
</html>
